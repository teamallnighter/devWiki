<h1>Errors: Cyclic object value</h1> <h2 id="Message">Message</h2> <pre class="syntaxbox">TypeError: cyclic object value (Firefox)
TypeError: Converting circular structure to JSON (Chrome and Opera)
TypeError: Circular reference in value argument not supported (Edge)
</pre> <h2 id="Error_type">Error type</h2> <p><a href="../global_objects/typeerror"><code>TypeError</code></a></p> <h2 id="What_went_wrong">What went wrong?</h2> <p>The <a href="https://www.json.org/">JSON format</a> per se doesn't support object references (although an <a href="http://tools.ietf.org/html/draft-pbryan-zyp-json-ref-03">IETF draft exists</a>), hence <a href="../global_objects/json/stringify"><code>JSON.stringify()</code></a> doesn't try to solve them and fail accordingly.</p> <h2 id="Examples">Examples</h2> <p>In a circular structure like the following</p> <pre data-language="js">var circularReference = {otherData: 123};
circularReference.myself = circularReference;
</pre> <p><a href="../global_objects/json/stringify"><code>JSON.stringify()</code></a> will fail</p> <pre data-language="js">JSON.stringify(circularReference);
// TypeError: cyclic object value
</pre> <p>To serialize circular references you can use a library that supports them (e.g. <a href="https://github.com/douglascrockford/JSON-js/blob/master/cycle.js">cycle.js</a>) or implement a solution by yourself, which will require finding and replacing (or removing) the cyclic references by serializable values.</p> <p>The snippet below illustrates how to find and filter (thus causing data loss) a cyclic reference by using the <code>replacer</code> parameter of <a href="../global_objects/json/stringify"><code>JSON.stringify()</code></a>:</p> <pre data-language="js">const getCircularReplacer = () =&gt; {
  const seen = new WeakSet();
  return (key, value) =&gt; {
    if (typeof value === "object" &amp;&amp; value !== null) {
      if (seen.has(value)) {
        return;
      }
      seen.add(value);
    }
    return value;
  };
};

JSON.stringify(circularReference, getCircularReplacer());
// {"otherData":123}
</pre> <h2 id="See_also">See also</h2> <ul> <li><a href="../global_objects/json/stringify"><code>JSON.stringify</code></a></li> <li>
<a href="https://github.com/douglascrockford/JSON-js/blob/master/cycle.js">cycle.js</a> â€“ Introduces two functions, <code>JSON.decycle</code> and <code>JSON.retrocycle</code>, which makes it possible to encode and decode cyclical structures and dags into an extended and retrocompatible JSON format.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value</a>
  </p>
</div>
