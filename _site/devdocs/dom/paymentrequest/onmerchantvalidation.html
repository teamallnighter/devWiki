<h1>PaymentRequest.onmerchantvalidation</h1><div class="blockIndicator secureContexts"><p><strong>Secure context</strong><br>This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#Browser_compatibility">supporting browsers</a>.</p></div> <p>The <a href="../paymentrequest"><code>PaymentRequest</code></a> event handler <code><strong>onmerchantvalidation</strong></code> is invoked when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/merchantvalidation">merchantvalidation</a></code> is fired, indicating that the payment handler (e.g., Apple Pay) requires the merchant to validate themselves. This is usually the first event to be fired, and the user won't be able to proceed with a payment until the merchant validate themselves.</p> <p>This event is not be fired by all payment handlers. In particular, it's used by Apple Pay.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>paymentRequest</em>.onmerchantvalidation = <em>eventHandlerFunction</em>;</pre> <h3 id="Value">Value</h3> <p>An event handler function which is to be called whenever the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/merchantvalidation">merchantvalidation</a></code> event is fired at the <a href="../paymentrequest"><code>PaymentRequest</code></a>, indicating that the payment handler requires the merchant to validate themselves as allowed to use this payment handler.</p> <h2 id="Examples">Examples</h2> <p>An example merchant validation is shown below:</p> <pre data-language="js">request.onmerchantvalidation = ev =&gt; {
    ev.complete(async () =&gt; {
        // get validation data, and complete validation;
        return await fetch(ev.validationURL).then(r =&gt; r.text());
    })
};
const response = await request.show();</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://w3c.github.io/payment-request/#onmerchantvalidation-attribute" hreflang="en">Payment Request API<br><small>The definition of 'onmerchantvalidation' in that specification.</small></a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td>Initial definition.</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility</h2>   <p>No compatibility data found. Please contribute data for "api.PaymentRequest.onmerchantvalidation" (depth: 1) to the <a href="https://github.com/mdn/browser-compat-data">MDN compatibility data repository</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onmerchantvalidation$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onmerchantvalidation" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onmerchantvalidation</a>
  </p>
</div>
