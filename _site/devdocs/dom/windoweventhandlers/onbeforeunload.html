<h1>WindowEventHandlers.onbeforeunload</h1><p>The <code><strong>WindowEventHandlers.onbeforeunload</strong></code> event handler property contains the code executed when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> is sent. This event fires when a window is about to <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/unload">unload</a></code> its resources. The document is still visible and the event is still cancelable.</p> <div class="note"> <p><strong>Note:</strong> To combat unwanted pop-ups, some browsers don't display prompts created in <code>beforeunload</code> event handlers unless the page has been interacted with; some don't display them at all. For a list of specific browsers, see the <a href="#Browser_compatibility">Browser compatibility</a> section.</p> </div> <h2 name="Syntax" id="Syntax">Syntax</h2> <pre class="syntaxbox">window.onbeforeunload = <var>funcRef</var></pre> <ul> <li>
<code>funcRef</code> is a reference to a function or a function expression.</li> <li>The HTML specification states that authors should use the <a href="../event/preventdefault"><code>Event.preventDefault()</code></a> method instead of using <a href="../event/returnvalue"><code>Event.returnValue</code></a> to prompt the user. However, this is not yet supported by all browsers.</li> </ul> <h2 name="Example" id="Example">Example</h2> <pre data-language="js">window.addEventListener('beforeunload', function (e) {
  // Cancel the event as stated by the standard.
  e.preventDefault();
  // Chrome requires returnValue to be set.
  e.returnValue = '';
});
</pre> <h2 id="Notes">Notes</h2> <p>When this event returns (or sets the <code>returnValue</code> property to) a value other than <code>null</code> or <code>undefined</code>, the user is prompted to confirm the page unload. In some browsers, the return value of the event is displayed in this dialog. Starting with Firefox 44, Chrome 51, Opera 38 and Safari 9.1, a generic string not under the control of the webpage will be shown instead of the returned string. For example, Firefox displays the string "This page is asking you to confirm that you want to leave - data you have entered may not be saved." (See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=588292">bug 588292</a>), and Chrome displays the string "Do you want to leave this site? Changes you made may not be saved" (see <a href="https://www.chromestatus.com/feature/5349061406228480">Chrome Platform Status</a>).</p> <p>Internet Explorer does not respect the <code>null</code> return value and will display this to users as "null" text. You have to use <code>undefined</code> to skip the prompt.</p> <p>The HTML specification states that calls to <a href="../window/alert"><code>window.alert()</code></a>, <a href="../window/confirm"><code>window.confirm()</code></a>, and <a href="../window/prompt"><code>window.prompt()</code></a> methods may be ignored during this event. See the <a href="http://www.w3.org/TR/html5/webappapis.html#user-prompts">HTML specification</a> for more details.</p> <p>Note also, that various browsers ignore the result of the event and do not ask the user for confirmation at all. The document will always be unloaded automatically. Firefox has a switch named <code>dom.disable_beforeunload</code> in <a>about:config</a> to enable this behaviour.</p> <p>You <em>can</em> and <em>should</em> handle this event through <a href="../eventtarget/addeventlistener"><code>window.addEventListener()</code></a> and the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event. More documentation is available there.</p> <p>Binding to this event can be used to prevent the browser from fully caching the page in cases where content is rendered by javascript. In certain circumstances when returning to a page that has executed javascript in order to populate content, you may find the javascript not running upon the return visit when navigating back. If window.onbeforeunload has been bound (and thus triggered when leaving that page) javascript in the page will be triggered on the subsequent return visit and therefore update the content.</p> <h2 id="Specifications">Specifications</h2> <p>The event was originally introduced by Microsoft in Internet Explorer 4 and standardized in the HTML5 specification.</p> <div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://html.spec.whatwg.org/multipage/#handler-window-onbeforeunload" hreflang="en">HTML Living Standard<br><small>The definition of 'onbeforeunload' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> <tr> <td><a href="https://www.w3.org/TR/html51/#windoweventhandlers" hreflang="en">HTML 5.1<br><small>The definition of 'GlobalEventHandlers' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td> </td> </tr> <tr> <td><a href="https://www.w3.org/TR/html50/#windoweventhandlers" hreflang="en">HTML5<br><small>The definition of 'GlobalEventHandlers' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td> </td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>  <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> 1</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 1</td>
<td class="bc-supports-yes"> 4</td>
<td class="bc-supports-yes"> 12</td>
<td class="bc-supports-yes"> 3</td>
</tr>
<tr>
<th scope="row">Custom text support 
</th>
<td class="bc-supports-no">? — 51</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-no">? — 44</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-no">? — 38</td>
<td class="bc-supports-no">? — 9</td>
</tr>
</tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-no bc-has-history"> No
<dl>
<dt class="bc-supports-no bc-supports"> No
</dt>
<dd> Implementation seems <a href="https://bugs.webkit.org/show_bug.cgi?id=19324">defect</a>.</dd>
</dl>
</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">Custom text support 
</th>
<td class="bc-supports-no">? — 51</td>
<td class="bc-supports-no">? — 51</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-no">? — 44</td>
<td class="bc-supports-no">? — 38</td>
<td> ? </td>
<td> ? </td>
</tr>
</tbody>
</table>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload</a>
  </p>
</div>
