<h3 id="keys">Keys</h3>

<table class="-shortcuts">
  <thead>
    <tr>
      <th>Shortcut</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Alt ←</code> <em>/</em> <code class="highlighter-rouge">Alt →</code></td>
      <td>Move word</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^U</code></td>
      <td>Delete to beginning</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^W</code></td>
      <td>Delete to previous <code class="highlighter-rouge">/</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^D</code></td>
      <td>Delete next character</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Alt D</code></td>
      <td>Delete next word</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^C</code></td>
      <td>Cancel line</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Alt P</code></td>
      <td>Page output</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Alt ↑</code> <em>/</em> <code class="highlighter-rouge">Alt ↓</code></td>
      <td>Previous <em>/</em> next arguments</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Alt E</code> <em>/</em> <code class="highlighter-rouge">Alt V</code></td>
      <td>Open in external editor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^L</code></td>
      <td>Repaint screen</td>
    </tr>
  </tbody>
</table>

<h3 id="help">Help</h3>

<table class="-shortcuts">
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Alt H</code></td>
      <td>Help on word (man)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Alt W</code></td>
      <td>Help on word (short descriptions)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Alt L</code></td>
      <td>List directory on cursor</td>
    </tr>
  </tbody>
</table>

<h2 id="function">Function</h2>

<h3 id="writing-functions">Writing functions</h3>

<pre><code class="language-fish">function my_function --description "My description"
  ···
end
</code></pre>

<h3 id="conditional">Conditional</h3>

<pre><code class="language-fish">if test -f foo.txt
  ···
else if test -f bar.txt
  ···
else
  ···
end
</code></pre>

<h3 id="combining-tests">Combining tests</h3>

<pre><code class="language-fish">if test -f foo.txt &amp;&amp; test -f bar.txt
</code></pre>

<pre><code class="language-fish">if test -f foo.txt -a -f bar.txt
</code></pre>

<pre><code class="language-fish">if test \( -f foo.txt \) -a -f \( bar.txt \)
</code></pre>

<h3 id="events">Events</h3>

<h4 id="emitting">Emitting</h4>

<pre><code class="language-fish">emit my_event
</code></pre>

<h4 id="listening">Listening</h4>

<pre><code class="language-fish">function myhook --on-event my_event
  ···
end
</code></pre>

<p>This lets you hook onto events, such as <code class="highlighter-rouge">fish_prompt</code>.</p>

<h2 id="completions">Completions</h2>

<h3 id="creating-completions">Creating completions</h3>

<h4 id="fishcompletionsmycommandfish">~/.fish/completions/mycommand.fish</h4>

<pre><code class="language-fish">complete -c mycommand ...
complete -c mycommand ...
complete -c mycommand ...
</code></pre>

<h3 id="options">Options</h3>

<pre><code class="language-fish">complete \
  -c                         # command
  -s                         # short option
  -l                         # long option
  -r, --require-parameter
  -f, --no-files
  -x                         # exclusive (-r -f)
  -n '__fish_use_subcommand' # condition
  --description ".."
</code></pre>

<h4 id="example">Example</h4>

<pre><code class="language-fish">  complete -c $cmd \
-n '__fish_use_subcommand' \
-x -a hello \
--description 'lol'
</code></pre>

<h3 id="conditions">Conditions</h3>

<table>
  <thead>
    <tr>
      <th>Condition</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_directories STRING DESCRIPTION</code></td>
      <td>performs path completion on STRING, allowing only directories, and giving them the description DESCRIPTION.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_path STRING DESCRIPTION</code></td>
      <td>performs path completion on STRING, giving them the description DESCRIPTION.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_groups</code></td>
      <td>prints a list of all user groups with the groups members as description.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_pids</code></td>
      <td>prints a list of all processes IDs with the command name as description.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_suffix SUFFIX</code></td>
      <td>performs file completion allowing only files ending in SUFFIX. The mimetype database is used to find a suitable description.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_complete_users</code></td>
      <td>prints a list of all users with their full name as description.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_print_filesystems</code></td>
      <td>prints a list of all known file systems. Currently, this is a static list, and not dependent on what file systems the host operating system actually understands.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_print_hostnames</code></td>
      <td>prints a list of all known hostnames. This functions searches the fstab for nfs servers, ssh for known hosts and checks the /etc/hosts file.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_print_interfaces</code></td>
      <td>prints a list of all known network interfaces.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_print_packages</code></td>
      <td>prints a list of all installed packages. This function currently handles Debian, rpm and Gentoo packages.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_use_subcommand</code></td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-n __fish_seen_subcommand_from init</code></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="example-1">Example</h4>

<pre><code class="language-fish">complete -c ruby -s X -x -a '(__fish_complete_directories (commandline -ct))' --description 'Directory'
</code></pre>

<h3 id="examples">Examples</h3>

<p>Start each example with <code class="highlighter-rouge">complete -c cmdname</code></p>

<pre><code class="language-fish">-x
  # no filename completion
</code></pre>

<pre><code class="language-fish">-s d -x -a "read skip"
  # -d {read|skip}
</code></pre>

<pre><code class="language-fish">-s d -x
  # -d &lt;something&gt;
</code></pre>

<pre><code class="language-fish">-s f -r
  # -f FILE
</code></pre>

<pre><code class="language-fish">-s f -l force
  # -f, --force
</code></pre>

<pre><code class="language-fish">-a "(cat /etc/passwd | cut -d : -f 1)"
  # first argument as filename
</code></pre>
