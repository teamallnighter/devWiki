<h1>async function</h1>  <p>The <code><strong>async function</strong></code> declaration defines an <strong>asynchronous function</strong>, which returns an <a href="../global_objects/asyncfunction"><code>AsyncFunction</code></a> object. An asynchronous function is a function which operates asynchronously via the event loop, using an implicit <a href="../global_objects/promise"><code>Promise</code></a> to return its result. But the syntax and structure of your code using async functions is much more like using standard synchronous functions.</p> <div class="noinclude"> <p>You can also define async functions using an <a href="../operators/async_function">async function expression</a>.</p> </div>  <iframe src="https://interactive-examples.mdn.mozilla.net/pages/js/statement-async.html" frameborder="0" width="100%" class="interactive interactive-js taller" height="250"></iframe>  <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">async function <em>name</em>([<em>param</em>[, <em>param</em>[, ... <em>param</em>]]]) {
   <em>statements</em>
}
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>name</code></dt> <dd>The function name.</dd> </dl> <dl> <dt><code>param</code></dt> <dd>The name of an argument to be passed to the function.</dd> </dl> <dl> <dt><code>statements</code></dt> <dd>The statements comprising the body of the function.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>A <code><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code> which will be resolved with the value returned by the async function, or rejected with an uncaught exception thrown from within the async function.</p> <h2 id="Description">Description</h2> <p>An <code>async</code> function can contain an <a href="../operators/await"><code>await</code></a> expression that pauses the execution of the async function and waits for the passed <code>Promise</code>'s resolution, and then resumes the <code>async</code> function's execution and returns the resolved value.<br> <br> Remember, the <code>await</code> keyword is only valid inside <code>async</code> functions. If you use it outside of an <code>async</code> function's body, you will get a <code><a href="../global_objects/syntaxerror">SyntaxError</a></code>.</p> <div class="note"> <p>The purpose of <code>async</code>/<code>await</code> functions is to simplify the behavior of using promises synchronously and to perform some behavior on a group of <code>Promises</code>. Just as <code>Promises</code> are similar to structured callbacks, <code>async</code>/<code>await</code> is similar to combining generators and promises.</p> </div> <h2 id="Examples">Examples</h2> <h3 id="Simple_example">Simple example</h3> <pre data-language="js">var resolveAfter2Seconds = function() {
  console.log("starting slow promise");
  return new Promise(resolve =&gt; {
    setTimeout(function() {
      resolve(20);
      console.log("slow promise is done");
    }, 2000);
  });
};

var resolveAfter1Second = function() {
  console.log("starting fast promise");
  return new Promise(resolve =&gt; {
    setTimeout(function() {
      resolve(10);
      console.log("fast promise is done");
    }, 1000);
  });
};

var sequentialStart = async function() {
  console.log('==SEQUENTIAL START==');

  // If the value of the expression following the await operator is not a Promise, it's converted to a resolved Promise.
  const slow = await resolveAfter2Seconds();

  const fast = await resolveAfter1Second();
  console.log(slow);
  console.log(fast);
}

var concurrentStart = async function() {
  console.log('==CONCURRENT START with await==');
  const slow = resolveAfter2Seconds(); // starts timer immediately
  const fast = resolveAfter1Second();

  console.log(await slow);
  console.log(await fast); // waits for slow to finish, even though fast is already done!
}

var stillConcurrent = function() {
  console.log('==CONCURRENT START with Promise.all==');
  Promise.all([resolveAfter2Seconds(), resolveAfter1Second()]).then((messages) =&gt; {
    console.log(messages[0]); // slow
    console.log(messages[1]); // fast
  });
}

var parallel = function() {
  console.log('==PARALLEL with Promise.then==');
  resolveAfter2Seconds().then((message)=&gt;console.log(message));
  resolveAfter1Second().then((message)=&gt;console.log(message));
}

sequentialStart(); // after 2 seconds, logs "slow", then after 1 more second, "fast"
// wait above to finish
setTimeout(concurrentStart, 4000); // after 2 seconds, logs "slow" and then "fast"
// wait again
setTimeout(stillConcurrent, 7000); // same as concurrentStart
// wait again
setTimeout(parallel, 10000); // trully parallel: after 1 second, logs "fast", then after 1 more second, "slow"
</pre> <div class="warning"> <h4 id="Do_not_confuse_await_for_Promisethen">Do not confuse <code>await</code> for <code>Promise#then</code>
</h4> <p>In <code>sequentialStart</code>, execution suspends 2 seconds for the first <code>await</code>, and then again another 1 second for the second <code>await</code>. The second timer is not created until the first has already fired.</p> <p>In <code>concurrentStart</code>, both timers are created and then <code>await</code>ed. The timers are running concurrently but the <code>await</code> calls are still running in series, meaning the second <code>await</code> will wait for the first one to finish. This leads the code to finish in 2 rather than 3 seconds, which is the time the slowest timer needs. The same happens in <code>stillConcurrent</code> using <code>Promise.all</code> this time.</p> <p>If you wish to await two or more promises in parallel, you must still use <code>Promise#then</code>, as <code>parallel</code> does in the example.</p> </div> <h3 id="Rewriting_a_promise_chain_with_an_async_function">Rewriting a promise chain with an <code>async</code> function</h3> <p>An API that returns a <a href="../global_objects/promise"><code>Promise</code></a> will result in a promise chain, and it splits the function into many parts. Consider the following code:</p> <pre data-language="js">function getProcessedData(url) {
  return downloadData(url) // returns a promise
    .catch(e =&gt; {
      return downloadFallbackData(url)  // returns a promise
    })
    .then(v =&gt; {
      return processDataInWorker(v); // returns a promise
    });
}
</pre> <p>it can be rewritten with a single <code>async</code> function as follows:</p> <pre data-language="js">async function getProcessedData(url) {
  let v;
  try {
    v = await downloadData(url); 
  } catch(e) {
    v = await downloadFallbackData(url);
  }
  return processDataInWorker(v);
}
</pre> <p>Note that in the above example, there is no <code>await</code> statement on the <code>return</code> statement, because the return value of an <code>async function</code> is implicitly wrapped in <a href="../global_objects/promise/resolve"><code>Promise.resolve</code></a>.</p> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://tc39.github.io/ecma262/#sec-async-function-definitions" hreflang="en">ECMAScript Latest Draft (ECMA-262)<br><small>The definition of 'async function' in that specification.</small></a></td> <td><span class="spec-Draft">Draft</span></td> <td>Initial definition in ES2017.</td> </tr> <tr> <td><a href="https://www.ecma-international.org/ecma-262/8.0/#sec-async-function-definitions" hreflang="en">ECMAScript 2017 (ECMA-262)<br><small>The definition of 'async function' in that specification.</small></a></td> <td><span class="spec-Standard">Standard</span></td> <td> </td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>   <div class="_table">
<table class="bc-table bc-table-js">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> 55</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 52</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 42</td>
<td class="bc-supports-yes"> 10.1</td>
</tr></tbody>
</table>
<table class="bc-table bc-table-js">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 55</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 52</td>
<td class="bc-supports-yes"> 42</td>
<td class="bc-supports-yes"> 10.1</td>
<td class="bc-supports-yes"> 6.0</td>
</tr></tbody>
</table>
<table class="bc-table bc-table-js">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="1">Server</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Node.js</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes bc-has-history"> 7.6.0
<section class="bc-history" id="sect1"><dl>
<dt class="bc-supports-yes bc-supports"> 7.6.0
</dt>

<dt class="bc-supports-yes bc-supports"> 7.0.0<div class="bc-icons">Disabled </div>
</dt>
<dd>Disabled From version 7.0.0: this feature is behind the <code>--harmony</code> runtime flag.</dd>
</dl></section>
</td>
</tr></tbody>
</table>
</div>  <h2 id="See_also">See also</h2> <ul> <li><a href="../operators/async_function"><code>async function expression</code></a></li> <li>
<a href="../global_objects/asyncfunction"><code>AsyncFunction</code></a> object</li> <li><a href="../operators/await"><code>await</code></a></li> <li><a href="http://innolitics.com/10x/javascript-decorators-for-promise-returning-functions/">"Decorating Async Javascript Functions" on "innolitics.com"</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function</a>
  </p>
</div>
