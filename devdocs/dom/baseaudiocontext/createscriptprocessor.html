<h1>BaseAudioContext.createScriptProcessor</h1>  <p>The <code>createScriptProcessor()</code> method of the <a href="../baseaudiocontext"><code>BaseAudioContext</code></a> interface creates a <a href="../scriptprocessornode"><code>ScriptProcessorNode</code></a> used for direct audio processing.</p>  <div class="note"> <p><strong>Note</strong>: As of the August 29 2014 Web Audio API spec publication, this feature has been marked as deprecated, and is soon to be replaced by <a href="https://webaudio.github.io/web-audio-api/#audioworklet">AudioWorklet</a>.</p> </div> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">var <em>scriptProcessor</em> = <em>audioCtx</em>.createScriptProcessor(<em>bufferSize</em>, <em>numberOfInputChannels</em>, <em>numberOfOutputChannels</em>);</pre> <h3 name="Parameters" id="Parameters">Parameters</h3> <dl> <dt><code>bufferSize</code></dt> <dd>The buffer size in units of sample-frames. If specified, the bufferSize must be one of the following values: 256, 512, 1024, 2048, 4096, 8192, 16384. If it's not passed in, or if the value is 0, then the implementation will choose the best buffer size for the given environment, which will be a constant power of 2 throughout the lifetime of the node.</dd> <dd>This value controls how frequently the <code>audioprocess</code> event is dispatched and how many sample-frames need to be processed each call. Lower values for <code>bufferSize</code> will result in a lower (better) latency. Higher values will be necessary to avoid audio breakup and glitches. It is recommended for authors to not specify this buffer size and allow the implementation to pick a good buffer size to balance between latency and audio quality.</dd> <dt><code>numberOfInputChannels</code></dt> <dd>Integer specifying the number of channels for this node's input, defaults to 2. Values of up to 32 are supported.</dd> <dt><code>numberOfOutputChannels</code></dt> <dd>Integer specifying the number of channels for this node's output, defaults to 2. Values of up to 32 are supported.</dd> </dl> <div class="warning"> <p><strong>Important</strong>: Webkit currently (version 31) requires that a valid <code>bufferSize</code> be passed when calling this method.</p> </div> <div class="note"> <p><strong>Note</strong>: It is invalid for both <code>numberOfInputChannels</code> and <code>numberOfOutputChannels</code> to be zero.</p> </div> <h3 name="Description" id="Description">Returns</h3> <p>A <a href="../scriptprocessornode"><code>ScriptProcessorNode</code></a>.</p> <h2 id="Example">Example</h2> <p>The following example shows basic usage of a <code>ScriptProcessorNode</code> to take a track loaded via <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/decodeAudioData"><code>AudioContext.decodeAudioData()</code></a>, process it, adding a bit of white noise to each audio sample of the input track (buffer) and play it through the <a href="../audiodestinationnode"><code>AudioDestinationNode</code></a>. For each channel and each sample frame, the <code>scriptNode.onaudioprocess</code> function takes the associated <code>audioProcessingEvent</code> and uses it to loop through each channel of the input buffer, and each sample in each channel, and add a small amount of white noise, before setting that result to be the output sample in each case.</p> <div class="note"> <p><strong>Note</strong>: For a full working example, see our <a href="https://mdn.github.io/webaudio-examples/script-processor-node/">script-processor-node</a> github repo (also view the <a href="https://github.com/mdn/webaudio-examples/blob/master/script-processor-node/index.html">source code</a>.)</p> </div> <pre data-language="js">var myScript = document.querySelector('script');
var myPre = document.querySelector('pre');
var playButton = document.querySelector('button');
      
// Create AudioContext and buffer source
var audioCtx = new AudioContext();
source = audioCtx.createBufferSource();

// Create a ScriptProcessorNode with a bufferSize of 4096 and a single input and output channel
var scriptNode = audioCtx.createScriptProcessor(4096, 1, 1);
console.log(scriptNode.bufferSize);

// load in an audio track via XHR and decodeAudioData

function getData() {
  request = new XMLHttpRequest();
  request.open('GET', 'viper.ogg', true);
  request.responseType = 'arraybuffer';
  request.onload = function() {
    var audioData = request.response;

    audioCtx.decodeAudioData(audioData, function(buffer) {
    myBuffer = buffer;   
    source.buffer = myBuffer;
  },
    function(e){"Error with decoding audio data" + e.err});
  }
  request.send();
}

// Give the node a function to process audio events
scriptNode.onaudioprocess = function(audioProcessingEvent) {
  // The input buffer is the song we loaded earlier
  var inputBuffer = audioProcessingEvent.inputBuffer;

  // The output buffer contains the samples that will be modified and played
  var outputBuffer = audioProcessingEvent.outputBuffer;

  // Loop through the output channels (in this case there is only one)
  for (var channel = 0; channel &lt; outputBuffer.numberOfChannels; channel++) {
    var inputData = inputBuffer.getChannelData(channel);
    var outputData = outputBuffer.getChannelData(channel);

    // Loop through the 4096 samples
    for (var sample = 0; sample &lt; inputBuffer.length; sample++) {
      // make output equal to the same as the input
      outputData[sample] = inputData[sample];

      // add noise to each output sample
      outputData[sample] += ((Math.random() * 2) - 1) * 0.2;         
    }
  }
}

getData();

// wire up play button
playButton.onclick = function() {
  source.connect(scriptNode);
  scriptNode.connect(audioCtx.destination);
  source.start();
}
      
// When the buffer source stops playing, disconnect everything
source.onended = function() {
  source.disconnect(scriptNode);
  scriptNode.disconnect(audioCtx.destination);
}
</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://webaudio.github.io/web-audio-api/#dom-baseaudiocontext-createscriptprocessor" hreflang="en">Web Audio API<br><small>The definition of 'createScriptProcessor' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td> </td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>    <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes bc-has-history"> 10<div class="bc-icons">Prefixed </div>
<dl>
<dt class="bc-supports-yes bc-supports"> 10<div class="bc-icons">Prefixed </div>
</dt>
<dd>Prefixed Requires the vendor prefix: webkit</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes bc-has-history"> 22
<dl>
<dt class="bc-supports-yes bc-supports"> 22
</dt>

<dt class="bc-supports-yes bc-supports"> 15<div class="bc-icons">Prefixed </div>
</dt>
<dd>Prefixed Requires the vendor prefix: webkit</dd>
</dl>
</td>
<td class="bc-supports-yes bc-has-history"> 6<div class="bc-icons">Prefixed </div>
<dl>
<dt class="bc-supports-yes bc-supports"> 6<div class="bc-icons">Prefixed </div>
</dt>
<dd>Prefixed Requires the vendor prefix: webkit</dd>
</dl>
</td>
</tr></tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 33</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 26</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-no"> No</td>
<td> ? </td>
</tr></tbody>
</table>
</div>   <h2 id="See_also">See also</h2> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createScriptProcessor$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createScriptProcessor" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createScriptProcessor</a>
  </p>
</div>
