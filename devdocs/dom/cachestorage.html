<h1>CacheStorage</h1><div class="notice overheadIndicator experimental"> <p> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Guidelines/Conventions_definitions#Experimental">experimental technology</a></strong><br>Check the <a href="#Browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p> </div> <p>The <code>CacheStorage</code> interface represents the storage for <a href="cache"><code>Cache</code></a> objects.</p> <p>The interface:</p> <ul> <li>provides a master directory of all the named caches that can be accessed by a <a href="serviceworker"><code>ServiceWorker</code></a> or other type of worker or <a href="window"><code>window</code></a> scope (you’re not limited to only using it with service workers, even though the <a href="https://w3c.github.io/ServiceWorker/" hreflang="en">Service Workers</a> spec defines it)</li> <li>maintains a mapping of string names to corresponding <a href="cache"><code>Cache</code></a> objects</li> </ul> <p>Use <a href="cachestorage/open"><code>CacheStorage.open()</code></a> to obtain a <a href="cache"><code>Cache</code></a> instance.</p> <p>Use <a href="cachestorage/match"><code>CacheStorage.match()</code></a> to check if a given <a href="request"><code>Request</code></a> is a key in any of the <a href="cache"><code>Cache</code></a> objects that the <code>CacheStorage</code> object tracks.</p> <p>You can access <code>CacheStorage</code> through the global <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/caches"><code>caches</code></a> property.</p> <div class="note">
<strong>Note</strong>: CacheStorage always rejects with a <code>SecurityError</code> on untrusted origins (i.e. those that aren't using HTTPS, although this definition will likely become more complex in the future.) When testing, you can get around this by checking the "Enable Service Workers over HTTP (when toolbox is open)" option in the Firefox Devtools options/gear menu.</div> <div class="note">
<strong>Note</strong>: <a href="cachestorage/match"><code>CacheStorage.match()</code></a> is a convenience method. Equivalent functionality to match a cache entry can be implemented by opening your cache with <a href="cachestorage/open"><code>CacheStorage.open()</code></a>, returning the entries it contains with <a href="cachestorage/keys"><code>CacheStorage.keys()</code></a>, and matching the one you want with <a href="cachestorage/match"><code>CacheStorage.match()</code></a>.</div> <h2 id="Methods">Methods</h2> <dl> <dt><a href="cachestorage/match"><code>CacheStorage.match()</code></a></dt> <dd>Checks if a given <a href="request"><code>Request</code></a> is a key in any of the <a href="cache"><code>Cache</code></a> objects that the <a href="cachestorage"><code>CacheStorage</code></a> object tracks, and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to that match.</dd> <dt><a href="cachestorage/has"><code>CacheStorage.has()</code></a></dt> <dd>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to <code>true</code> if a <a href="cache"><code>Cache</code></a> object matching the <code>cacheName</code> exists.</dd> <dt><a href="cachestorage/open"><code>CacheStorage.open()</code></a></dt> <dd>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to the <a href="cache"><code>Cache</code></a> object matching the <code>cacheName</code> (a new cache is created if it doesn't already exist.)</dd> <dt><a href="cachestorage/delete"><code>CacheStorage.delete()</code></a></dt> <dd>Finds the <a href="cache"><code>Cache</code></a> object matching the <code>cacheName</code>, and if found, deletes the <a href="cache"><code>Cache</code></a> object and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to <code>true</code>. If no <a href="cache"><code>Cache</code></a> object is found, it returns <code>false</code>.</dd> <dt><a href="cachestorage/keys"><code>CacheStorage.keys()</code></a></dt> <dd>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will resolve with an array containing strings corresponding to all of the named <a href="cache"><code>Cache</code></a> objects tracked by the <a href="cachestorage"><code>CacheStorage</code></a>. Use this method to iterate over a list of all the <a href="cache"><code>Cache</code></a> objects.</dd> </dl> <h2 id="Examples">Examples</h2> <p>This code snippet is from the MDN <a href="https://github.com/mdn/sw-test/">sw-test example</a> (see <a href="https://mdn.github.io/sw-test/">sw-test running live</a>.) This service worker script waits for an <a href="installevent"><code>InstallEvent</code></a> to fire, then runs <a href="extendableevent/waituntil"><code>waitUntil</code></a> to handle the install process for the app. This consists of calling <a href="cachestorage/open"><code>CacheStorage.open</code></a> to create a new cache, then using <a href="cache/addall"><code>Cache.addAll</code></a> to add a series of assets to it.</p> <p>In the second code block, we wait for a <a href="fetchevent"><code>FetchEvent</code></a> to fire. We construct a custom response like so:</p> <ol> <li>Check whether a match for the request is found in the CacheStorage. If so, serve that.</li> <li>If not, fetch the request from the network, then also open the cache created in the first block and add a clone of the request to it using <a href="cache/put"><code>Cache.put</code></a> (<code>cache.put(event.request, response.clone())</code>.)</li> <li>If this fails (e.g. because the network is down), return a fallback response.</li> </ol> <p>Finally, return whatever the custom response ended up being equal to, using <a href="fetchevent/respondwith"><code>FetchEvent.respondWith</code></a>.</p> <pre data-language="js">this.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('v1').then(function(cache) {
      return cache.addAll([
        '/sw-test/',
        '/sw-test/index.html',
        '/sw-test/style.css',
        '/sw-test/app.js',
        '/sw-test/image-list.js',
        '/sw-test/star-wars-logo.jpg',
        '/sw-test/gallery/bountyHunters.jpg',
        '/sw-test/gallery/myLittleVader.jpg',
        '/sw-test/gallery/snowTroopers.jpg'
      ]);
    })
  );
});

this.addEventListener('fetch', function(event) {
  var response;
  event.respondWith(caches.match(event.request).catch(function() {
    return fetch(event.request);
  }).then(function(r) {
    response = r;
    caches.open('v1').then(function(cache) {
      cache.put(event.request, response);
    });
    return response.clone();
  }).catch(function() {
    return caches.match('/sw-test/gallery/myLittleVader.jpg');
  }));
});</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://w3c.github.io/ServiceWorker/#cache-storage" hreflang="en">Service Workers<br><small>The definition of 'CacheStorage' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>  <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-yes bc-has-history"> 40
<dl>
<dt class="bc-supports-yes bc-supports"> 40
</dt>
<dd> Accessible from <code>Window</code> from version 43.</dd>
<dd> Accessible from <code>WorkerGlobalScope</code> from version 43.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-no"> No</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/delete"><code>delete</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-no"> No</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/has"><code>has</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-no"> No</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/keys"><code>keys</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-no"> No</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/match"><code>match</code></a> 
</th>
<td class="bc-supports-yes bc-has-history"> 54
<dl>
<dt class="bc-supports-yes bc-supports"> 54
</dt>

<dt class="bc-supports-partial bc-supports">40
</dt>
<dd> The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes bc-has-history"> 41
<dl>
<dt class="bc-supports-yes bc-supports"> 41
</dt>

<dt class="bc-supports-partial bc-supports">27
</dt>
<dd> The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/open"><code>open</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> 44
<dl>
<dt class="bc-supports-yes bc-supports"> 44
</dt>
<dd> Service workers (and <a href="https://developer.mozilla.org/docs/Web/API/Push_API">Push</a>) have been disabled in the <a href="https://www.mozilla.org/firefox/organizations/">Firefox 45 &amp; 52 Extended Support Releases</a> (ESR.)</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-no"> No</td>
</tr>
</tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-yes bc-has-history"> 40
<dl>
<dt class="bc-supports-yes bc-supports"> 40
</dt>
<dd> Accessible from <code>Window</code> from version 43.</dd>
<dd> Accessible from <code>WorkerGlobalScope</code> from version 43.</dd>
</dl>
</td>
<td class="bc-supports-yes bc-has-history"> 40
<dl>
<dt class="bc-supports-yes bc-supports"> 40
</dt>
<dd> Accessible from <code>Window</code> from version 43.</dd>
<dd> Accessible from <code>WorkerGlobalScope</code> from version 43.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/delete"><code>delete</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/has"><code>has</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/keys"><code>keys</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/match"><code>match</code></a> 
</th>
<td class="bc-supports-yes bc-has-history"> 54
<dl>
<dt class="bc-supports-yes bc-supports"> 54
</dt>

<dt class="bc-supports-partial bc-supports">40
</dt>
<dd> The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>.</dd>
</dl>
</td>
<td class="bc-supports-yes bc-has-history"> 54
<dl>
<dt class="bc-supports-yes bc-supports"> 54
</dt>

<dt class="bc-supports-partial bc-supports">40
</dt>
<dd> The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes bc-has-history"> 41
<dl>
<dt class="bc-supports-yes bc-supports"> 41
</dt>

<dt class="bc-supports-partial bc-supports">27
</dt>
<dd> The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/CacheStorage/open"><code>open</code></a> 
</th>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> 40</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 44</td>
<td class="bc-supports-yes"> 27</td>
<td class="bc-supports-yes"> Yes</td>
<td> ? </td>
</tr>
</tbody>
</table>
</div> <h2 id="See_also">See also</h2> <ul> <li><a href="service_worker_api/using_service_workers">Using Service Workers</a></li> <li><a href="cache"><code>Cache</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/caches"><code>WorkerGlobalScope.caches</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage</a>
  </p>
</div>
