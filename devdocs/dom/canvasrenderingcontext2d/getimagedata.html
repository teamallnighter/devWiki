<h1>CanvasRenderingContext2D.getImageData</h1> <p>The <a href="../canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a> method <code><strong>getImageData()</strong></code> of the Canvas 2D API returns an <a href="../imagedata"><code>ImageData</code></a> object representing the underlying pixel data for a specified portion of the canvas.</p> <p>This method is not affected by the canvas's transformation matrix. If the specified rectangle extends outside the bounds of the canvas, the pixels outside the canvas are transparent black in the returned <code>ImageData</code> object.</p> <div class="note"> <p><strong>Note:</strong> Image data can be painted onto a canvas using the <a href="putimagedata"><code>putImageData()</code></a> method.</p> </div> <p>You can find more information about <code>getImageData()</code> and general manipulation of canvas contents in <a href="../canvas_api/tutorial/pixel_manipulation_with_canvas">Pixel manipulation with canvas</a>.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>ctx</em>.getImageData(<em>sx</em>, <em>sy</em>, <em>sw</em>, <em>sh</em>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>sx</code></dt> <dd>The x-axis coordinate of the top-left corner of the rectangle from which the <code>ImageData</code> will be extracted.</dd> <dt><code>sy</code></dt> <dd>The y-axis coordinate of the top-left corner of the rectangle from which the <code>ImageData</code> will be extracted.</dd> <dt><code>sw</code></dt> <dd>The width of the rectangle from which the <code>ImageData</code> will be extracted. Positive values are to the right, and negative to the left.</dd> <dt><code>sh</code></dt> <dd>The height of the rectangle from which the <code>ImageData</code> will be extracted. Positive values are down, and negative are up.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>An <a href="../imagedata"><code>ImageData</code></a> object containing the image data for the rectangle of the canvas specified. The coordinates of the rectangle's top-left corner are <code>(sx, sy)</code>, while the coordinates of the bottom corner are <code>(sx + sw, sy + sh)</code>.</p> <h3 id="Exceptions">Exceptions</h3> <dl> <dt><code>IndexSizeError</code></dt> <dd>Thrown if either <code>sw</code> or <code>sh</code> are zero.</dd> <dt><code>SecurityError</code></dt> <dd>The canvas contains or may contain pixels which were loaded from an origin other than the one from which the document itself was loaded. To avoid <code>SecurityError</code> being thrown in this situation, configure CORS to allow the source image to be use in this way. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image">Allowing cross-origin use of images and canvas</a>.</dd> </dl> <h2 id="Example">Example</h2> <h3 id="Getting_image_data_from_a_canvas">Getting image data from a canvas</h3> <p>This example draws a rectangle, and then uses <code>getImageData()</code> to grab a portion of the canvas.</p> <h4 id="HTML">HTML</h4> <pre data-language="html">&lt;canvas id="canvas"&gt;&lt;/canvas&gt;
</pre> <h4 id="JavaScript">JavaScript</h4> <p>The object retrieved by <code>getImageData()</code> has a width of 200 and a height of 100, for a total of 20,000 pixels. Of those pixels, most are either transparent or taken from off the canvas; only 5,000 of them are opaque black (the color of the drawn rectangle).</p> <pre data-language="js">const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
ctx.rect(10, 10, 100, 100);
ctx.fill();

let imageData = ctx.getImageData(60, 60, 200, 100);
ctx.putImageData(imageData, 150, 10);
</pre> <h4 id="Result">Result</h4> <p><iframe src="https://mdn.mozillademos.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData%24samples/Getting_image_data_from_a_canvas?revision=1437154" height="180" class="live-sample-frame sample-code-frame" width="700" frameborder="0" id="frame_Getting_image_data_from_a_canvas"></iframe></p> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-getimagedata" hreflang="en">HTML Living Standard<br><small>The definition of 'CanvasRenderingContext2D.getImageData' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>  <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> 12</td>
<td class="bc-supports-yes bc-has-history"> Yes
<dl>
<dt class="bc-supports-yes bc-supports"> Yes
</dt>

<dt class="bc-supports-yes bc-supports"> 5
</dt>
<dd> <code>getImageData</code> now correctly accepts rectangles that extend beyond the bounds of the canvas; pixels outside the canvas are returned as transparent black and now also returns at least one pixel's worth of image data if a rectangle smaller than one pixel is specified.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
</tr></tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support</th>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes bc-has-history"> Yes
<dl>
<dt class="bc-supports-yes bc-supports"> Yes
</dt>

<dt class="bc-supports-yes bc-supports"> 5
</dt>
<dd> <code>getImageData</code> now correctly accepts rectangles that extend beyond the bounds of the canvas; pixels outside the canvas are returned as transparent black and now also returns at least one pixel's worth of image data if a rectangle smaller than one pixel is specified.</dd>
</dl>
</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
<td class="bc-supports-yes"> Yes</td>
</tr></tbody>
</table>
</div> <h2 id="See_also">See also</h2> <ul> <li>The interface defining this method: <a href="../canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a>
</li> <li>
<a href="../imagedata"><code>ImageData</code></a> object</li> <li><a href="putimagedata"><code>CanvasRenderingContext2D.putImageData()</code></a></li> <li><a href="../canvas_api/tutorial/pixel_manipulation_with_canvas">Pixel manipulation with canvas</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData</a>
  </p>
</div>
