<h1>PaymentRequest.onpaymentmethodchange</h1><div class="overheadIndicator secureContexts"><p><strong>Secure context</strong><br>This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#Browser_compatibility">supporting browsers</a>.</p></div> <p>The <a href="../paymentrequest"><code>PaymentRequest</code></a> event handler <code><strong>onpaymentmethodchange</strong></code> is invoked when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/paymentmethodchange">paymentmethodchange</a></code> is fired, indicating that the user has changed payment methods within a given payment handler. For example, when using Apple Pay, the user can swipe to select different credit cards, debit cards, and so forth. Each time the user does so, this event is fired.</p> <p>This event may not be fired by all payment handlers.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">PaymentRequest.addEventListener('paymentmethodchange', paymentMethodChangeEvent =&gt; { ... });

PaymentRequest.onpaymentmethodchange = function(paymentMethodChangeEvent) { ... };</pre> <h3 id="Value">Value</h3> <p>An event handler function which is to be called whenever the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/paymentmethodchange">paymentmethodchange</a></code> event is fired at the <a href="../paymentrequest"><code>PaymentRequest</code></a>, indicating that the user has changed payment methods within the same payment handler.</p> <p>The <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/paymentmethodchange">paymentmethodchange</a></code> event is triggered by a user-agent controlled interaction (i.e., the end-user switches from a debit to a credit card in the payment UI). To make sure you receive the event, you should add event listeners to <a href="../paymentrequest"><code>PaymentRequest</code></a> object after instantiation, but before you call <code>show()</code>.</p> <h2 id="Examples">Examples</h2> <p>An example payment method change handler is shown below; this example handles changes made to the payment method when using Apple Pay, specifically:</p> <pre data-language="js">request.onpaymentmethodchange = ev =&gt; {
  const { type: cardType } = ev.methodDetails;
  const newStuff = {};
  if (ev.methodName === "https://apple.com/apple-pay") {
    switch (cardType) {
      case "store":
        // do Apple Pay specific handling for store card...
        // methodDetails contains the store card information
        const result = calculateDiscount(ev.methodDetails);
        Object.assign(newStuff, result);
        break;
    }
  }
  // finally...
  ev.updateWith(newStuff);
};
const response = await request.show();</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://w3c.github.io/payment-request/#onpaymentmethodchange-attribute" hreflang="en">Payment Request API<br><small>The definition of 'onpaymentmethodchange' in that specification.</small></a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td>Initial definition.</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>   <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-no"> No</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 63<div class="bc-icons">Disabled </div>
<dl>
<dt class="bc-supports-yes bc-supports"> 63<div class="bc-icons">Disabled </div>
</dt>
<dd>Disabled From version 63: this feature is behind the <code>dom.payments.request.enabled</code> preference (needs to be set to <code>true</code>). To change preferences in Firefox, visit about:config.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-no"> No</td>
<td> ? </td>
</tr></tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-no"> No</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 63<div class="bc-icons">Disabled </div>
<dl>
<dt class="bc-supports-yes bc-supports"> 63<div class="bc-icons">Disabled </div>
</dt>
<dd>Disabled From version 63: this feature is behind the <code>dom.payments.request.enabled</code> preference (needs to be set to <code>true</code>). To change preferences in Firefox, visit about:config.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td> ? </td>
<td> ? </td>
</tr></tbody>
</table>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onpaymentmethodchange$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onpaymentmethodchange" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequest/onpaymentmethodchange</a>
  </p>
</div>
