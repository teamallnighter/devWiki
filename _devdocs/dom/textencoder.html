<h1>TextEncoder</h1><div class="blockIndicator experimental indicator-warning"> <p> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Guidelines/Conventions_definitions#Experimental">experimental technology</a></strong><br>Check the <a href="#Browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p> </div> <p><code><strong>TextEncoder</strong></code> takes a stream of code points as input and emits a stream of bytes. For a more scalable, non-native library, see <a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/StringView"><code>StringView</code> – a C-like representation of strings based on typed arrays</a>.</p> <div class="blockIndicator note"> <p><strong>Note</strong>: Firefox, Chrome and Opera used to have support for encoding types other than <code>utf-8</code> (such as <code>utf-16</code>, <code>iso-8859-2</code>, <code>koi8</code>, <code>cp1261</code>, and <code>gbk</code>). As of Firefox 48 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1257877">bug 1257877</a>), Chrome 54 (<a href="https://www.chromestatus.com/feature/5630760492990464">ticket</a>) and Opera 41, no other encoding types are available other than <code>utf-8</code>, in order to match the <a href="https://www.w3.org/TR/encoding/#dom-textencoder">spec</a>. In all cases, passing in an encoding type to the constructor will be ignored and a utf-8 TextEncoder will be created (the <a href="textdecoder"><code>TextDecoder</code></a> still allows for other decoding types).</p> </div> <div class="blockIndicator note"> <p><strong>Note</strong>: There is a polyfill implementation to support all the legacy encodings in <a href="https://github.com/inexorabletash/text-encoding">GitHub</a>.</p> </div> <h2 id="Constructor">Constructor</h2> <dl> <dt><a href="textencoder/textencoder"><code>TextEncoder()</code></a></dt> <dd>Returns a newly constructed <code>TextEncoder</code> that will generate a byte stream with utf-8 encoding.</dd> </dl> <h2 id="Properties">Properties</h2> <p><em>The <code>TextEncoder</code> interface doesn't inherit any property.</em></p> <dl> <dt>
<a href="textencoder/encoding"><code>TextEncoder.encoding</code></a><span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Is a <a href="domstring"><code>DOMString</code></a> containing the name of the encoder, that is a string describing the method the <code>TextEncoder</code> will use.</dd> </dl> <h2 id="Methods">Methods</h2>  <p><em><em>The <code>TextEncoder</code> interface doesn't inherit any </em>method</em>.</p> <dl> <dt><a href="textencoder/encode"><code>TextEncoder.encode()</code></a></dt> <dd>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays/Uint8Array"><code>Uint8Array</code></a> containing utf-8 encoded text.</dd> </dl>  <h2 id="Polyfill">Polyfill</h2> <p>The below polyfill will only furfill the specs demanded by the W3 (no character encodings other than UTF-8 are supported, unfortunately ☹️). It is designed to work in IE5 "out of the box". However, in IE5-IE9, it will return a regular Array instead of a TypedArray. In such circumstances as these with such memory inefficient slow browsers, this polyfill (or any polyfill for that matter) would be impractical for large strings in such old browsers. Finally, note that you should run the below code through a minifier (especially closure compiler) to turn sequences like <code>0x1e &lt;&lt; 3</code> into <code>0xf0</code>. These sequences are not already precomputed because they serve to aesthetically illustrate how the polyfill works.</p> <pre data-language="js">if (typeof TextEncoder === "undefined") {
    TextEncoder=function TextEncoder(){};
    TextEncoder.prototype.encode = function encode(str) {
        "use strict";
        var Len = str.length, resPos = -1;
        // The Uint8Array's length must be at least 3x the length of the string because an invalid UTF-16
        //  takes up the equivelent space of 3 UTF-8 characters to encode it properly. However, Array's
        //  have an auto expanding length and 1.5x should be just the right balance for most uses.
        var resArr = typeof Uint8Array === "undefined" ? new Array(Len * 1.5) : new Uint8Array(Len * 3);
        for (var point=0, nextcode=0, i = 0; i !== Len; ) {
            point = str.charCodeAt(i), i += 1;
            if (point &gt;= 0xD800 &amp;&amp; point &lt;= 0xDBFF) {
                if (i === Len) {
                    resArr[resPos += 1] = 0xef/*0b11101111*/; resArr[resPos += 1] = 0xbf/*0b10111111*/;
                    resArr[resPos += 1] = 0xbd/*0b10111101*/; break;
                }
                // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae
                nextcode = str.charCodeAt(i);
                if (nextcode &gt;= 0xDC00 &amp;&amp; nextcode &lt;= 0xDFFF) {
                    point = (point - 0xD800) * 0x400 + nextcode - 0xDC00 + 0x10000;
                    i += 1;
                    if (point &gt; 0xffff) {
                        resArr[resPos += 1] = (0x1e/*0b11110*/&lt;&lt;3) | (point&gt;&gt;&gt;18);
                        resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6) | ((point&gt;&gt;&gt;12)&amp;0x3f/*0b00111111*/);
                        resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6) | ((point&gt;&gt;&gt;6)&amp;0x3f/*0b00111111*/);
                        resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6) | (point&amp;0x3f/*0b00111111*/);
                        continue;
                    }
                } else {
                    resArr[resPos += 1] = 0xef/*0b11101111*/; resArr[resPos += 1] = 0xbf/*0b10111111*/;
                    resArr[resPos += 1] = 0xbd/*0b10111101*/; continue;
                }
            }
            if (point &lt;= 0x007f) {
                resArr[resPos += 1] = (0x0/*0b0*/&lt;&lt;7) | point;
            } else if (point &lt;= 0x07ff) {
                resArr[resPos += 1] = (0x6/*0b110*/&lt;&lt;5) | (point&gt;&gt;&gt;6);
                resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6)  | (point&amp;0x3f/*0b00111111*/);
            } else {
                resArr[resPos += 1] = (0xe/*0b1110*/&lt;&lt;4) | (point&gt;&gt;&gt;12);
                resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6)    | ((point&gt;&gt;&gt;6)&amp;0x3f/*0b00111111*/);
                resArr[resPos += 1] = (0x2/*0b10*/&lt;&lt;6)    | (point&amp;0x3f/*0b00111111*/);
            }
        }
        if (typeof Uint8Array !== "undefined") return resArr.subarray(0, resPos + 1);
        // else // IE 6-9
        resArr.length = resPos + 1; // trim off extra weight
        return resArr;
    };
    TextEncoder.prototype.toString = function(){return "[object TextEncoder]"};
    try { // Object.defineProperty only works on DOM prototypes in IE8
        Object.defineProperty(TextEncoder.prototype,"encoding",{
            get:function(){if(TextEncoder.prototype.isPrototypeOf(this)) return"utf-8";
                           else throw TypeError("Illegal invocation");}
        });
    } catch(e) { /*IE6-8 fallback*/ TextEncoder.prototype.encoding = "utf-8"; }
    if(typeof Symbol!=="undefined")TextEncoder.prototype[Symbol.toStringTag]="TextEncoder";
}
</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://encoding.spec.whatwg.org/#interface-textencoder" hreflang="en">Encoding<br><small>The definition of 'TextEncoder' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>Initial definition.</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility<a href="https://github.com/mdn/browser-compat-data" class="bc-github-link">Update compatibility data on GitHub</a>
</h2>   <div class="_table">
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="6">Desktop</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-yes"> 10.1</td>
</tr>
<tr>
<th scope="row">Available in Web Workers 
</th>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes"> 20</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-yes"> 10.1</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/TextEncoder"><code>TextEncoder()</code> constructor</a> 
</th>
<td class="bc-supports-yes bc-has-history"> 53
<dl>
<dt class="bc-supports-yes bc-supports"> 53
</dt>
<dd> Does not accept parameters. Supports only <code>utf-8</code> encoding.</dd>
<dt class="bc-supports-no bc-supports">38 — 53
</dt>
<dd> Throws <code>RangeError</code> exception for unknown encoding types.</dd>
</dl>
</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 48
<dl>
<dt class="bc-supports-yes bc-supports"> 48
</dt>
<dd> The constructor accepts an encoding type label argument, but the value is ignored. Only <code>utf-8</code> encoding is supported.</dd>
<dt class="bc-supports-no bc-supports">38 — 48
</dt>
<dd> If the encoding type label argument is invalid, then a <code>RangeError</code> exception is thrown.</dd>
<dt class="bc-supports-no bc-supports">19 — 38
</dt>
<dd> If the encoding type label argument is invalid, then a <code>TypeError</code> exception is thrown.</dd>
<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-yes"> 10.1</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/encoding"><code>encoding</code></a> 
</th>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-yes"> 10.1</td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/encode"><code>encode</code></a> 
</th>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td class="bc-supports-no"> No</td>
<td class="bc-supports-yes"> 25</td>
<td class="bc-supports-yes"> 10.1</td>
</tr>
</tbody>
</table>
<table class="bc-table bc-table-web">
<thead>
<tr class="bc-platforms">
<th></th>
<th colspan="7">Mobile</th>
</tr>
<tr class="bc-browsers">
<th></th>
<th>Android webview</th>
<th>Chrome for Android</th>
<th>Edge Mobile</th>
<th>Firefox for Android</th>
<th>Opera for Android</th>
<th>iOS Safari</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">Basic support 
</th>
<td class="bc-supports-yes"> 38</td>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td> ? </td>
<td class="bc-supports-yes"> 10.1</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">Available in Web Workers 
</th>
<td class="bc-supports-yes"> 38</td>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes"> 20</td>
<td> ? </td>
<td class="bc-supports-yes"> 10.1</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/TextEncoder"><code>TextEncoder()</code> constructor</a> 
</th>
<td class="bc-supports-yes"> 38</td>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 48
<dl>
<dt class="bc-supports-yes bc-supports"> 48
</dt>
<dd> The constructor accepts an encoding type label argument, but the value is ignored. Only <code>utf-8</code> encoding is supported.</dd>
<dt class="bc-supports-no bc-supports">38 — 48
</dt>
<dd> If the encoding type label argument is invalid, then a <code>RangeError</code> exception is thrown.</dd>
<dt class="bc-supports-no bc-supports">19 — 38
</dt>
<dd> If the encoding type label argument is invalid, then a <code>TypeError</code> exception is thrown.</dd>
<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td> ? </td>
<td class="bc-supports-yes"> 10.1</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/encoding"><code>encoding</code></a> 
</th>
<td class="bc-supports-yes"> 38</td>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td> ? </td>
<td class="bc-supports-yes"> 10.1</td>
<td> ? </td>
</tr>
<tr>
<th scope="row">
<a href="https://developer.mozilla.org/docs/Web/API/TextEncoder/encode"><code>encode</code></a> 
</th>
<td class="bc-supports-yes"> 38</td>
<td class="bc-supports-yes"> 38</td>
<td> ? </td>
<td class="bc-supports-yes bc-has-history"> 19
<dl>
<dt class="bc-supports-yes bc-supports"> 19
</dt>

<dt class="bc-supports-yes bc-supports"> 18
</dt>
<dd> Firefox 18 implemented an earlier and slightly different version of the specification.</dd>
</dl>
</td>
<td> ? </td>
<td class="bc-supports-yes"> 10.1</td>
<td> ? </td>
</tr>
</tbody>
</table>
</div>  <h2 id="See_also">See also</h2> <ul> <li>The <a href="textdecoder"><code>TextDecoder</code></a> interface describing the inverse operation.</li> <li>
<a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/StringView"><code>StringView</code></a> – a C-like representation of strings based on typed arrays</li> <li>A <a href="https://github.com/inexorabletash/text-encoding">shim</a> allowing to use this interface in browsers that don't support it.</li> <li><code><a href="https://developer.mozilla.org/en-US/docs/Components.utils.importGlobalProperties">Components.utils.importGlobalProperties</a></code></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder</a>
  </p>
</div>
